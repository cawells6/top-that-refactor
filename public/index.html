<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Top That! – Card Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Your CSS -->
  <link rel="stylesheet" href="/style.css" />

  <!-- Socket.IO client -->
  <script defer src="/socket.io/socket.io.js"></script>

  <!-- Entry‑point for your client modules -->
  <script defer type="module" src="/scripts/events.js"></script>
</head>
<body>
  <header class="header" id="main-header">
    <div class="header__content" style="display: flex; align-items: center; justify-content: space-between; padding: 0 2.5rem; background: #1b2e3c; min-height: 54px;">
      <div class="header__brand" style="display: flex; flex-direction: column; align-items: flex-start;">
        <span style="color: #FFC300; font-weight: bold; font-size: 1.4rem; letter-spacing: 0.01em;">&#x1F451; Top That!</span>
        <span style="color: #FFC300; font-size: 0.95rem; font-weight: 400; margin-top: -2px;">One Pile. One Winner. No Mercy.</span>
      </div>
      <button id="rules-button" class="btn btn-primary" style="font-size: 1rem; font-weight: 600; padding: 0.5rem 1.2rem; border-radius: 6px; background: #FFC300; color: #222;">How to Play</button>
    </div>
  </header>

  <div class="notice notice--hidden" id="notice-banner"></div>
  <div class="notice notice--hidden" id="error-banner"></div>
  <div class="modal__overlay modal__overlay--hidden" id="modal-overlay"></div>

  <main class="main-content" id="main-content">
    <!-- Lobby Screen -->
    <div class="lobby lobby--hidden" id="lobby-container">
      <div class="lobby-card" id="lobby-form-card">
        <h2 class="lobby-title" style="color: #FFC300;">Game Setup</h2>
        <div class="lobby-form-content" id="lobby-form-content">
          <div class="form-group">
            <input id="name-input" type="text" placeholder="Enter your name" />
          </div>
          <div class="form-group">
            <label id="name-input-error" style="display:none;color:#c00;font-size:0.95em;">Name is required</label>
          </div>
          <div class="lobby-buttons">
            <button id="create-join" class="btn btn-primary">Join Game</button>
            <button id="play-vs-computer" class="btn btn-secondary">Play vs Computer</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Game Table -->
    <div class="table table--hidden" id="table">
      <div class="table-slot table-slot-top"></div>
      <div class="table-slot table-slot-left"></div>
      <div class="table-center" id="center"></div>
      <div class="table-slot table-slot-right"></div>
      <div class="table-slot table-slot-bottom"></div>
    </div>
  </main>

  <section class="game-log game-log--hidden" id="game-log"></section>

  <div class="modal modal--hidden" id="rules-modal" role="dialog" aria-modal="true" aria-labelledby="rules-modal-title">
    <div class="modal__content rules-modal-content">
      <button class="modal__close-button" aria-label="Close">&times;</button>
      <h2 class="modal__title rules-modal-title" id="rules-modal-title">How to Play <span style='color:#FFC300'>Top That!</span></h2>
      <div class="rules-section quickstart-section">
        <h3 class="rules-section-title">Quick Start</h3>
        <ul class="rules-list">
          <li>Play cards <b>higher than the top discard</b> (or use a special card).</li>
          <li>If you can't play, <b>pick up the pile</b>.</li>
          <li>First to play all their cards wins!</li>
        </ul>
      </div>
      <div class="rules-section">
        <h3 class="rules-section-title">Game Setup</h3>
        <ul class="rules-list">
          <li>Use <b>1 deck</b> for 1–3 players; <b>2 decks</b> for 4–8 players.</li>
          <li>Deal each player, in order:
            <ul class="rules-sublist">
              <li>3 cards face-down</li>
              <li>3 cards face-up</li>
              <li>3 cards in their hand</li>
            </ul>
          </li>
          <li>Place the rest face-down as the draw pile.</li>
          <li>Turn the top card face-up to start the discard pile.</li>
        </ul>
      </div>
      <div class="rules-section">
        <h3 class="rules-section-title">On Your Turn</h3>
        <ul class="rules-list">
          <li>Play one or more <b>hand cards of the same value</b> higher than the top discard.</li>
          <li>After playing, draw back up to 3 cards (if the draw pile isn’t empty).</li>
          <li>If you can’t play, pick up the entire discard pile into your hand.</li>
          <li>End by passing play to the next player.</li>
        </ul>
      </div>
      <div class="rules-section">
        <h3 class="rules-section-title">Special Cards</h3>
        <ul class="rules-list">
          <li><img src="src/shared/Reset-icon.png" alt="Reset" class="rules-icon"/> <span class="rules-special">2</span> <span class="rules-label">Reset</span>: Reset the pile. Next player may play any card.</li>
          <li><img src="src/shared/Copy-icon.png" alt="Copy" class="rules-icon"/> <span class="rules-special">5</span> <span class="rules-label">Copy</span>: Copy the last card’s value. If it’s the first in a new pile, treat as normal.</li>
          <li><img src="src/shared/Burn-icon.png" alt="Burn" class="rules-icon"/> <span class="rules-special">10</span> <span class="rules-label">Burn</span>: Clear the discard pile—those cards are removed.</li>
          <li><img src="src/shared/4ofakind-icon.png" alt="Four-of-a-kind" class="rules-icon"/> <span class="rules-special">Four-of-a-kind</span> <span class="rules-label">Burn</span>: Also clears the pile, regardless of value.</li>
        </ul>
      </div>
      <div class="rules-section">
        <h3 class="rules-section-title">Playing Up & Down Cards</h3>
        <ul class="rules-list">
          <li>Finish hand cards before playing face-up.</li>
          <li>Finish face-up before playing face-down.</li>
          <li>Only one face-up or face-down card may be played per turn, even if you have multiples of the same value.</li>
          <li>If you can’t play an up/down card, pick up the discard pile and resume with hand cards.</li>
        </ul>
      </div>
      <div class="rules-section">
        <h3 class="rules-section-title">Winning</h3>
        <ul class="rules-list">
          <li>First to empty hand, face-up, and face-down cards wins.</li>
        </ul>
      </div>
      <button class="btn btn-primary rules-gotit-btn" id="rules-gotit-btn" style="width:100%;margin-top:1.2rem;font-size:1.1rem;">Got it!</button>
    </div>
  </div>

  <div class="toast-container" id="toast-container"></div>
</body>
</html>
